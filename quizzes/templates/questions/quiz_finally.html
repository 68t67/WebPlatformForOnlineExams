{% extends 'base.html' %}
{% load user_filters %}
{% block title %}
  {{ quiz.title }} - {{ quiz.theme.title}}
{% endblock %}
{% block content %}
  <a href="{% url 'questions:quiz_list' quiz.theme.slug %}" class="text-decoration-none fs-5 fw-bold">{{ quiz.theme.title }}</a>
  <h1 class="fw-bold">{{ quiz.title }}</h1>
  <p class="py-3 fs-5">Тест пройден</p>
  {% if latest_answers %}
    <h3 class="pb-2">Результаты</h3>
    {% if questions_count %}
      <p>Верных ответов: <span class="fw-bold">{{ correct_count }}</span> из <span class="fw-bold">{{ questions_count }}</span>
      {% if correct_percentage > 0 %}
        ({{ correct_percentage }}%)
      {% endif %}
      </p>
    {% endif %}
    {% for answer in latest_answers %}
      <div class="pb-3">
        <p class="py-2 pt-3 fs-5 {% if answer.correct %}text-success{% else %}text-danger{% endif %}">{{ answer.question_text }}
          {% if answer.correct %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
            </svg>
          {% else %}
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-dash-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM4.5 7.5a.5.5 0 0 0 0 1h7a.5.5 0 0 0 0-1h-7z"/>
            </svg>
          {% endif %}
        </p>
        {% for variant in answer.variants.all %}
          <div class="d-inline bg-light me-3 mb-3 p-2 border rounded-3">{{ variant }}</div>
        {% endfor %}
      </div>
    {% endfor %}
  {% endif %}
{% endblock %}
