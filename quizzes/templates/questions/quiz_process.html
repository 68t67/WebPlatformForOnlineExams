{% extends 'base.html' %}
{% load user_filters %}
{% load widget_tweaks %}
{% block title %}
  {{ quiz.title }} - {{ quiz.theme.title}}
{% endblock %}
{% block content %}
  <a href="{% url 'questions:quiz_list' quiz.theme.slug %}" class="text-decoration-none fs-5 fw-bold">{{ quiz.theme.title }}</a>
  <h1 class="fw-bold">{{ quiz.title }}</h1>
  <h3 class="pt-3 fw-bold">Вопрос {{ stage }}</h3>
  <p class="py-3 fs-5">{{ question.text }}</p>
  {% if not already_answered %}
  <form method="post">
    {% csrf_token %}
      <div class="{% if form.non_field_errors %}invalid{% endif %} mb-3 text-danger">
        {% for error in form.non_field_errors %}
          {{ error }}
        {% endfor %}
      </div>
    {% for field in form %}
      {% if question.many_correct %}
        <div class="form-check">
          {{ field|addclass:'form-check-input' }}
          <label class="form-check-label" for="flexCheckDefault">
            {{ field.label }}
          </label>
        </div>
      {% elif question.one_correct %}
          {{ field|addclass:'list-unstyled p-0 m-0 mb-2' }}
      {% endif %}
    {% endfor %}
    <button type="submit" class="btn btn-primary my-3">
      Ответить
    </button>
  </form>
  {% else %}
    <p class="fw-bold">Ваши ответы</p>
  {% for answer in answers %}
    {% for variant in answer.variants.all %}
      <p>{{ variant.variant_text }}</p>
    {% endfor %}
  {% endfor %}
  {% endif %}
{% endblock %}
