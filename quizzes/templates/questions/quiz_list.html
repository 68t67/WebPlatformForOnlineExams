{% extends 'base.html' %}
{% load user_filters %}
{% block title %}
  {{ theme.title }}
{% endblock %}
{% block content %}
  <h1 class="fw-bold">{{ theme.title }}</h1>
  <div class="main-tile">
    <p class="py-3 fs-5">{{ theme.description }}</p>
    {% for quiz in quizzes %}
      <div class="row pb-5">
        <div class="col-9">
          <a href="{% url 'questions:quiz_detail' quiz.slug %}" class="text-decoration-none"><h4>{{ quiz.title }}</h4></a>
          <p>{{ quiz.description }}</p>
          {% if quiz.questions_count %}
            <p><span>Вопросов: </span>{{ quiz.questions_count }}</p>
          {% endif %}
        </div>
        <div class="col-3 d-flex align-items-center flex-row-reverse">
          {% if request.user.is_authenticated and quiz.current_stage and not quiz.passed %}
            <a href="{% url 'questions:quiz_process' quiz.slug quiz.current_stage %}" class="btn btn-primary">Продолжить</a>
          {% elif request.user.is_authenticated and quiz.passed %}
            <a href="{% url 'questions:quiz_finally' quiz.slug %}" class="btn btn-success">Результаты</a>
          {% else %}
            <a href="{% url 'questions:quiz_process' quiz.slug 1 %}" class="btn btn-primary">Пройти</a>
          {% endif %}
        </div>
        {% if request.user.is_authenticated and quiz.questions_count and quiz.percentage > 0 and not quiz.passed %}
          <div class="col-12 py-3">
            <div class="progress">
              <div class="progress-bar"role="progressbar" style="width: {{ quiz.percentage }}%"></div>
            </div>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
  {% include '../includes/paginator.html' %}
{% endblock %}
