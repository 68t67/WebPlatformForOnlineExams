{% extends "base.html" %}
{% load humanize %}
{% block title %}Профиль пользователя {{ user.username }}{% endblock %}
{% block content %}
<h3 class="fw-bold">{{ user.username }}</h3>
<div class="row">
  <div class="col-md-12 col-xl-4">
    {% if user.first_name %}
      <h5>{{ user.first_name }} {{ user.last_name }}</h5>
    {% endif %}
    <p class="text-secondary mini-info">Зарегистрирован {{ user.date_joined|date:"d.m.Y" }}</p>
    {% if user.about %}
      <p class="text-secondary">{{ user.about }}</p>
    {% endif %}
    {% if request.user.is_authenticated and request.user == user %}
      <a class="btn btn-primary me-3 my-2" href="{% url 'users:profile_edit' user.username %}" class="pe-4">Редактировать профиль</a>
      <a class="btn btn-primary my-2" href="{% url 'users:password_change_form' %}">Смена пароля</a>
    {% endif %}
  </div>
  <div class="row col-md-12 col-xl-8 py-3">
    {% if user.exams_count %}
      <div class="col-4 text-center">
        <div class="text-secondary">Пройдено тестов</div>
        <h3 class="fw-bold py-3">{{ user.exams_count }}</h3>
      </div>
    {% endif %}
    {% if user.correct_percentage %}
      <div class="col-4 text-center">
        <div class="text-secondary">Верных ответов</div>
        <h3 class="fw-bold py-3
        {% if user.correct_percentage > 65 %}
        text-success
        {% elif user.correct_percentage > 32 %}
        text-warning
        {% else %}
        text-danger
        {% endif %}
        ">{{ user.correct_percentage }}%</h3>
      </div>
    {% endif %}
    {% if user.points %}
    <div class="col-4 text-center">
      <div class="text-secondary">Баллов</div>
      <h3 class="fw-bold py-3">{{ user.points }}</h3>
    </div>
    <div class="col-12 text-center">
      <div class="mini-info text-secondary">Позиция в <a href="{% url 'users:users_rankings' %}">рейтинге</a>: {{ user.position_of_rankings }}</div>
    </div>
  {% endif %}
  </div>
</div>
{% if exams %}
  <h3 class="py-3 pt-4 fw-bold">Прогресс</h3>
  {% include '../includes/exams.html' %}
{% endif %}
{% endblock %}
